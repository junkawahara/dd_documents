# graphillion 形式

本ドキュメントでは、graphillion において、ZDD を入出力、保持するための書式を定義する。
この書式を graphillion 形式と呼ぶ。

## graphillion 形式で扱う ZDD の種類

graphillion 形式では、1つのZDD（Zero-Suppressed Binary Decision Diagram）を表現できる。
graphillion 形式で扱う ZDD は既約でなくてもよい。否定枝表現はできない。

## graphillion 形式の構造

graphillion 形式では、改行文字として '\n' を用いる。
末尾は必ずピリオド '.' と改行文字からなる。

変数番号は 1 から n までの整数であり、根に近い方が番号が小さくなる
（終端に近い方が番号が大きくなる）。

ZDD の非終端ノードのIDは 0 以上の整数であり、ノードを区別するために使用される。
連続する整数でなくてよい（非終端ノードの個数が k 個のとき、
ノードIDが k 未満の整数であるノードが存在しない可能性がある）。

ZDD の0-終端ノード、1-終端ノードのIDは、文字 'B'、'T' である。
0-終端ノード、1-終端ノードのみからなる ZDD はそれぞれ "B\n.\n"、"T\n.\n" と表される。

graphillion 形式では、（末尾のピリオドの行以外は）1行で
1つのノードを表す。1行は4つの文字列からなり、以下の意味である。

```
<ノードのID> <ノードの変数番号> <ノードの0-枝側の子ノードのID> <ノードの1-枝側の子ノードのID>
```

i 行目を読み込んだ時点で、i 行目のノードの子ノードは既に現れていなければならない。
すなわち、i 行目のノードの子ノードは j 行目（i > j）に記載されていなければならない。
根ノードは必ず（末尾のピリオドの行を除いた）最終行となる。
各行は、ノードの変数番号で降順にソートされている。
すなわち、i < j のとき、(i 行目のノードの変数番号) > (j 行目のノードの変数番号) が成り立つ。


## ドキュメント修正履歴

### 2021/10/25

公開

### 2023/9/26

ノードの変数番号の順についての記述に誤りがあったので修正。
